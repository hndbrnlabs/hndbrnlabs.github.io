<!DOCTYPE html>
 <html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Galactic Research Navigator</title>
  <style>
  body { margin: 0; overflow: hidden; background-color: #000; color: #eee; font-family: sans-serif; }
  #galaxy-container { position: relative; width: 100vw; height: 100vh; }
  #project-details {
  position: absolute;
  top: 20px;
  left: 20px;
  background-color: rgba(0, 0, 0, 0.8);
  color: #eee;
  padding: 20px;
  border-radius: 5px;
  z-index: 10;
  display: none;
  }
  </style>
 </head>
 <body>
  <div id="galaxy-container">
  <div id="project-details"></div>
  </div>

  <script type="module">
  import * as THREE from 'https://cdn.skypack.dev/three@0.136.0';
  import { OrbitControls } from 'https://cdn.skypack.dev/three@0.136.0/examples/jsm/controls/OrbitControls.js';

  const galaxyContainer = document.getElementById('galaxy-container');
  const projectDetailsDiv = document.getElementById('project-details');

  // Scene, Camera, Renderer
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
  const renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  galaxyContainer.appendChild(renderer.domElement);

  // OrbitControls
  const controls = new OrbitControls(camera, renderer.domElement);
  camera.position.z = 800;
  controls.update();

  // Galaxy Background (Fainter Particles for Depth)
  const bgParticleCount = 25000;
  const bgPositions = new Float32Array(bgParticleCount * 3);
  const bgColors = new Float32Array(bgParticleCount * 3);
  const bgSizes = new Float32Array(bgParticleCount);
  const bgColor = new THREE.Color();
  const textureLoader = new THREE.TextureLoader();
  const starTexture = textureLoader.load('https://threejs.org/examples/textures/sprites/white-point.png');

  for (let i = 0; i < bgParticleCount; i++) {
  const i3 = i * 3;
  bgPositions[i3 + 0] = (Math.random() - 0.5) * 2500;
  bgPositions[i3 + 1] = (Math.random() - 0.5) * 2500;
  bgPositions[i3 + 2] = (Math.random() - 0.5) * 2500;

  const intensity = Math.random() * 0.5 + 0.5; // Fainter
  bgColor.setHSL(0, 0, 1); // White
  bgColors[i3 + 0] = bgColor.r * intensity;
  bgColors[i3 + 1] = bgColor.g * intensity;
  bgColors[i3 + 2] = bgColor.b * intensity;

  bgSizes[i] = Math.random() * 1.5 + 0.5; // Smaller sizes
  }

  const bgGeometry = new THREE.BufferGeometry();
  bgGeometry.setAttribute('position', new THREE.BufferAttribute(bgPositions, 3));
  bgGeometry.setAttribute('color', new THREE.BufferAttribute(bgColors, 3));
  bgGeometry.setAttribute('size', new THREE.BufferAttribute(bgSizes, 1));

  const bgMaterial = new THREE.PointsMaterial({
  sizeAttenuation: true,
  vertexColors: true,
  size: 2,
  map: starTexture,
  transparent: true,
  alphaTest: 0.01,
  blending: THREE.AdditiveBlending
  });

  const background = new THREE.Points(bgGeometry, bgMaterial);
  scene.add(background);

  // Mock research project data with progress as age proxy
  const projects = [
  { id: 'proj1', title: 'Quantum Entanglement Study', topic: 'Quantum Physics', progress: 0.1, size: 15, x: 0, y: 0, z: 100 }, // 'Younger'
  { id: 'proj2', title: 'Exoplanet Atmosphere Analysis', topic: 'Astrophysics', progress: 0.5, size: 12, x: 150, y: 80, z: -100 }, // Intermediate
  { id: 'proj3', title: 'Machine Learning for Drug Discovery', topic: 'AI & Biotech', progress: 0.9, size: 18, x: -100, y: -150, z: 150 }, // 'Older'
  { id: 'proj4', title: 'Dark Matter Distribution Mapping', topic: 'Astrophysics', progress: 0.2, size: 10, x: -200, y: 120, z: -120 }, // Younger
  { id: 'proj5', title: 'Novel Materials Synthesis', topic: 'Materials Science', progress: 0.7, size: 14, x: 120, y: -30, z: 50 }, // Older
  { id: 'proj6', title: 'Cosmological Microwave Background Analysis', topic: 'Cosmology', progress: 0.4, size: 11, x: -250, y: 0, z: -150 }, // Intermediate
  ];

  function getStarColor(progress) {
  // Approximate color gradient: Blue -> White -> Yellow -> Orange -> Red
  const color = new THREE.Color();
  const p = progress;

  if (p < 0.25) {
  color.setRGB(0.3 + p * 2.8, 0.6 + p * 1.6, 1.0); // Blue to White-Blue
  } else if (p < 0.5) {
  const q = (p - 0.25) * 4;
  color.setRGB(1.0, 1.0 - 0.4 * q, 1.0 - 0.8 * q); // White-Blue to Yellow-White
  } else if (p < 0.75) {
  const q = (p - 0.5) * 4;
  color.setRGB(1.0, 0.6 - 0.2 * q, 0.2 + 0.2 * q); // Yellow-White to Orange
  } else {
  const q = (p - 0.75) * 4;
  color.setRGB(1.0 - 0.2 * q, 0.4 - 0.1 * q, 0.4 - 0.4 * q); // Orange to Red-Orange
  }
  return color;
  }

  // Create project stars (spheres with astronomical colors)
  projects.forEach(project => {
  const geometry = new THREE.SphereGeometry(project.size, 32, 32);
  const color = getStarColor(project.progress);
  const material = new THREE.MeshBasicMaterial({ color: color, transparent: true, opacity: 0.8, blending: THREE.AdditiveBlending });
  const star = new THREE.Mesh(geometry, material);
  star.position.set(project.x, project.y, project.z);
  star.userData = { projectId: project.id, projectData: project };
  scene.add(star);
  });

  // Raycasting
  const raycaster = new THREE.Raycaster();
  const mouse = new THREE.Vector2();

  function onMouseClick(event) {
  mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
  mouse.y = - (event.clientY / window.innerHeight) * 2 + 1;

  raycaster.setFromCamera(mouse, camera);
  const intersects = raycaster.intersectObjects(scene.children);

  if (intersects.length > 0) {
  const intersectedObject = intersects[0].object;
  if (intersectedObject.userData && intersectedObject.userData.projectId) {
  showProjectDetails(intersectedObject.userData.projectData);
  }
  }
  }

  function showProjectDetails(project) {
  projectDetailsDiv.innerHTML = `
  <h3>${project.title}</h3>
  <p><strong>Topic:</strong> ${project.topic}</p>
  <p><strong>"Age"/Progress:</strong> ${(project.progress * 100).toFixed(0)}%</p>
  <button onclick="hideProjectDetails()">Close</button>
  `;
  projectDetailsDiv.style.display = 'block';
  }

  function hideProjectDetails() {
  projectDetailsDiv.style.display = 'none';
  }

  function animate() {
  requestAnimationFrame(animate);
  controls.update();
  renderer.render(scene, camera);
  }

  window.addEventListener('click', onMouseClick, false);
  animate();
  </script>
 </body>
 </html>
