<!DOCTYPE html>
 <html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Galactic Research Navigator</title>
  <style>
  body { margin: 0; overflow: hidden; background-color: #000; color: #eee; font-family: sans-serif; }
  #galaxy-container { position: relative; width: 100vw; height: 100vh; }
  #project-details {
  position: absolute;
  top: 20px;
  left: 20px;
  background-color: rgba(0, 0, 0, 0.8);
  color: #eee;
  padding: 20px;
  border-radius: 5px;
  z-index: 10;
  display: none;
  }
  </style>
 </head>
 <body>
  <div id="galaxy-container">
  <div id="project-details"></div>
  </div>

  <script type="module">
  import * as THREE from 'https://cdn.skypack.dev/three@0.136.0';
  import { OrbitControls } from 'https://cdn.skypack.dev/three@0.136.0/examples/jsm/controls/OrbitControls.js';

  const galaxyContainer = document.getElementById('galaxy-container');
  const projectDetailsDiv = document.getElementById('project-details');

  // Scene, Camera, Renderer
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
  const renderer = new THREE.WebGLRenderer();
  renderer.setSize(window.innerWidth, window.innerHeight);
  galaxyContainer.appendChild(renderer.domElement);

  // OrbitControls
  const controls = new OrbitControls(camera, renderer.domElement);
  camera.position.z = 800;
  controls.update();

  // Galaxy Background (Particle System)
  const particleCount = 10000;
  const positions = new Float32Array(particleCount * 3);
  const colors = new Float32Array(particleCount * 3);
  const sizes = new Float32Array(particleCount);
  const color = new THREE.Color();

  for (let i = 0; i < particleCount; i++) {
  const i3 = i * 3;
  positions[i3 + 0] = (Math.random() - 0.5) * 2000;
  positions[i3 + 1] = (Math.random() - 0.5) * 2000;
  positions[i3 + 2] = (Math.random() - 0.5) * 2000;

  const vx = (Math.random() + 1) / 2;
  color.setHSL(vx, Math.random() * 0.1 + 0.8, Math.random() * 0.1 + 0.8);

  colors[i3 + 0] = color.r;
  colors[i3 + 1] = color.g;
  colors[i3 + 2] = color.b;

  sizes[i] = Math.random() * 4 + 1;
  }

  const geometry = new THREE.BufferGeometry();
  geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
  geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
  geometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));

  const material = new THREE.PointsMaterial({
  sizeAttenuation: true,
  vertexColors: true,
  size: 2,
  blending: THREE.AdditiveBlending
  });

  const particleSystem = new THREE.Points(geometry, material);
  scene.add(particleSystem);

  // Mock research project data (3D positions)
  const projects = [
  { id: 'proj1', title: 'Quantum Entanglement Study', topic: 'Quantum Physics', progress: 0.8, color: 'lightblue', size: 10, x: 0, y: 0, z: 100 },
  { id: 'proj2', title: 'Exoplanet Atmosphere Analysis', topic: 'Astrophysics', progress: 0.5, color: 'orange', size: 8, x: 150, y: 80, z: -100 },
  { id: 'proj3', title: 'Machine Learning for Drug Discovery', topic: 'AI & Biotech', progress: 0.9, color: 'lightgreen', size: 12, x: -100, y: -150, z: 150 },
  { id: 'proj4', title: 'Dark Matter Distribution Mapping', topic: 'Astrophysics', progress: 0.3, color: 'yellow', size: 6, x: -200, y: 120, z: -120 },
  { id: 'proj5', title: 'Novel Materials Synthesis', topic: 'Materials Science', progress: 0.7, color: 'pink', size: 9, x: 120, y: -30, z: 50 },
  { id: 'proj6', title: 'Cosmological Microwave Background Analysis', topic: 'Cosmology', progress: 0.6, color: 'cyan', size: 7, x: -250, y: 0, z: -150 },
  // Add more projects here
  ];

  // Create project stars (spheres)
  projects.forEach(project => {
  const geometry = new THREE.SphereGeometry(project.size, 16, 16);
  const material = new THREE.MeshBasicMaterial({ color: project.color });
  const star = new THREE.Mesh(geometry, material);
  star.position.set(project.x, project.y, project.z);
  star.userData = { projectId: project.id, projectData: project }; // Store project data
  scene.add(star);
  });

  // Raycasting
  const raycaster = new THREE.Raycaster();
  const mouse = new THREE.Vector2();

  function onMouseClick(event) {
  mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
  mouse.y = - (event.clientY / window.innerHeight) * 2 + 1;

  raycaster.setFromCamera(mouse, camera);
  const intersects = raycaster.intersectObjects(scene.children);

  if (intersects.length > 0) {
  const intersectedObject = intersects[0].object;
  if (intersectedObject.userData && intersectedObject.userData.projectId) {
  showProjectDetails(intersectedObject.userData.projectData);
  }
  }
  }

  function showProjectDetails(project) {
  projectDetailsDiv.innerHTML = `
  <h3>${project.title}</h3>
  <p><strong>Topic:</strong> ${project.topic}</p>
  <p><strong>Progress:</strong> ${(project.progress * 100).toFixed(0)}%</p>
  <button onclick="hideProjectDetails()">Close</button>
  `;
  projectDetailsDiv.style.display = 'block';
  }

  function hideProjectDetails() {
  projectDetailsDiv.style.display = 'none';
  }

  function animate() {
  requestAnimationFrame(animate);
  controls.update();
  renderer.render(scene, camera);
  }

  window.addEventListener('click', onMouseClick, false);
  animate();
  </script>
 </body>
 </html>
